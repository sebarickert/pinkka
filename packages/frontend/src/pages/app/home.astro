---
import { AppProvider } from "@/components/app-provider";
import { Heading } from "@/components/elements/heading";
import { FinancialAccountList } from "@/components/features/financial-account/financial-account-list";
import RootAuthenticatedLayout from "@/layouts/RootAuthenticatedLayout.astro";
import { FinancialAccountService } from "@/services/financial-account-service";

const user = Astro.locals.user;

const accounts = await FinancialAccountService.getAll(
  Astro.request.headers.get("cookie") || ""
);
---

<RootAuthenticatedLayout title="Welcome">
  <Heading>{`Hello logged in ${user?.name}`}</Heading>
  <AppProvider client:load>
    <FinancialAccountList initialData={accounts} />
  </AppProvider>
</RootAuthenticatedLayout>
